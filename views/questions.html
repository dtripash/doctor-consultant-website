<!DOCTYPE html>
<html>
<head>
  <title>Health Questions</title>
  <link rel="stylesheet" href="/css/questions.css">
</head>
<body>
  <h2 id="heading">We need a few details to guide your treatment</h2>

  <form action="/submit-questions" method="POST" class="question-form">
    <label>1. How long have you been facing the issue?</label><br>
    <input type="text" name="duration" required><br><br>

    <label>2. Is there any pain involved?</label><br>
    <select name="pain">
      <option value="none">No</option>
      <option value="mild">Mild</option>
      <option value="severe">Severe</option>
    </select><br><br>

    <label>3. Have you consulted any doctor before?</label><br>
    <input type="radio" name="consulted" value="yes" required> Yes
    <input type="radio" name="consulted" value="no"> No<br><br>

    <button type="submit">Submit</button>
  </form>

  <script>
    const params = new URLSearchParams(window.location.search);
const problem = params.get("problem");

// Optional: display
if (problem) {
  document.getElementById("heading").textContent += ` for ${problem}`;
  // Save in localStorage for later
  localStorage.setItem("problemType", problem);
}

document.querySelector("form").addEventListener("submit", function(e) {
  const email = localStorage.getItem("patientEmail");
  if (email) {
    const hiddenEmail = document.createElement("input");
    hiddenEmail.type = "hidden";
    hiddenEmail.name = "email";
    hiddenEmail.value = email;
    e.target.appendChild(hiddenEmail);
  }

  const storedProblem = localStorage.getItem("problemType");
  if (storedProblem) {
    const hiddenProblem = document.createElement("input");
    hiddenProblem.type = "hidden";
    hiddenProblem.name = "problemType";
    hiddenProblem.value = storedProblem;
    e.target.appendChild(hiddenProblem);
  }
});

  </script>
</body>
</html>